<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="/css/styles.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
</head>
<body>
    
    
    <main class="container mt-4">
        <!-- Flash Messages -->
        <% if (typeof messages !== 'undefined' && messages) { %>
        <div class="flash-messages mb-4">
            <% Object.keys(messages).forEach(function(type) { %>
                <div class="alert alert-<%= type %>">
                    <ul class="mb-0">
                        <% messages[type].forEach(function(message) { %>
                        <li><%= message %></li>
                        <% }) %>
                    </ul>
                </div>
            <% }) %>
        </div>
        <% } %>

        <!-- Display errors if any -->
        <% if (errors && errors.length > 0) { %>
            <div class="alert alert-danger mb-4">
                <ul class="mb-0">
                    <% errors.forEach(function(error) { %>
                        <li><%= error.msg || error %></li>
                    <% }) %>
                </ul>
            </div>
        <% } %>

        <!-- Account Management Content -->
        <div class="row justify-content-center">
            <div class="col-md-10 col-lg-8">
                
                <!-- Welcome Section Based on Account Type -->
                <% if (locals.accountData) { %>
                    <% if (locals.accountData.account_type === 'Client') { %>
                        <!-- Client Welcome -->
                        <div class="card mb-4">
                            <div class="card-body text-center">
                                <h2 class="card-title text-primary mb-3">
                                    Welcome <%= locals.accountData.account_firstname %>!
                                </h2>
                                <p class="card-text">Thank you for being a valued customer of CSE Motors.</p>
                            </div>
                        </div>
                        
                    <% } else if (locals.accountData.account_type === 'Employee' || locals.accountData.account_type === 'Admin') { %>
                        <!-- Employee/Admin Welcome -->
                        <div class="card mb-4">
                            <div class="card-body text-center">
                                <h2 class="card-title text-success mb-3">
                                    Welcome <%= locals.accountData.account_firstname %>!
                                </h2>
                                <p class="card-text">Employee/Administrator Dashboard</p>
                                
                                <!-- Inventory Management Section (ONLY for Employees/Admins) -->
                                <div class="mt-4 pt-3 border-top">
                                    <h3 class="h5 mb-3">Inventory Management</h3>
                                    <p class="card-text mb-3">
                                        Access the inventory management system to manage vehicles and classifications.
                                    </p>
                                    <a href="/inv/" class="btn btn-success">
                                        <i class="bi bi-box-seam me-1"></i> Manage Inventory
                                    </a>
                                </div>
                            </div>
                        </div>
                    <% } %>
                <% } %>
                
                <!-- Update Account Information Card (ALWAYS shown for all logged-in users) -->
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-light">
                        <h3 class="h5 mb-0">Update Account Information</h3>
                    </div>
                    <div class="card-body">
                        <p class="card-text mb-3">
                            Keep your account information up to date. You can change your name, email, or password.
                        </p>
                        <a href="/account/update/<%= locals.accountData.account_id %>" class="btn btn-primary">
                            <i class="bi bi-pencil-square me-1"></i> Update Account
                        </a>
                    </div>
                </div>
                
                <!-- Account Details Card -->
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-light">
                        <h3 class="h5 mb-0">Account Details</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <strong>First Name:</strong><br>
                                <%= locals.accountData.account_firstname %>
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Last Name:</strong><br>
                                <%= locals.accountData.account_lastname %>
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Email Address:</strong><br>
                                <%= locals.accountData.account_email %>
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Account Type:</strong><br>
                                <span class="badge bg-info"><%= locals.accountData.account_type %></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Account ID:</strong><br>
                                <code><%= locals.accountData.account_id %></code>
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Account Created:</strong><br>
                                <small class="text-muted">Active account</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-light">
                        <h3 class="h5 mb-0">Quick Actions</h3>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <a href="/account/update/<%= locals.accountData.account_id %>" class="btn btn-outline-primary w-100">
                                    <i class="bi bi-person-circle me-1"></i> Edit Profile
                                </a>
                            </div>
                            <div class="col-md-6">
                                <a href="/" class="btn btn-outline-secondary w-100">
                                    <i class="bi bi-house me-1"></i> Back to Home
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Security Section -->
                <div class="card shadow-sm">
                    <div class="card-header bg-light">
                        <h3 class="h5 mb-0">Security</h3>
                    </div>
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <strong>Account Status:</strong>
                                <span class="badge bg-success ms-2">Active</span>
                            </div>
                            <a href="/account/logout" class="btn btn-outline-danger">
                                <i class="bi bi-box-arrow-right me-1"></i> Logout
                            </a>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
    </main>

    
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>